{% extends "base.html" %}
{% block title %}Inicio - RopaStore{% endblock %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
{% block content %}
<!-- HERO SECTION -->
<section class="hero-section bg-gradient-primary py-5 mb-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <h1 class="display-4 fw-bold text-white mb-4">
          Descubre tu <span class="text-warning">estilo √∫nico</span>
        </h1>
        <p class="lead text-white mb-4">
          Las mejores tendencias en moda para toda la familia. Calidad, estilo y precios incre√≠bles en un solo lugar.
        </p>
        <div class="d-flex gap-3 flex-wrap">
          <a href="{{ url_for('auth.login') }}" class="btn btn-warning btn-lg px-4 py-2 rounded-pill shadow">
            <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesi√≥n
          </a>
          <a href="#productos-destacados" class="btn btn-outline-light btn-lg px-4 py-2 rounded-pill">
            <i class="bi bi-arrow-down me-2"></i>Ver Productos
          </a>
        </div>
      </div>
      <div class="col-lg-6 text-center">
        <img src="{{ url_for('static', filename='img/hero-fashion.png') }}" 
             alt="Moda RopaStore" 
             class="img-fluid rounded-4 shadow-lg" 
             style="max-height: 400px;">
      </div>
    </div>
  </div>
</section>

<!-- STATS SECTION -->
<section class="container my-5">
  <div class="row g-4 text-center">
    <div class="col-md-3">
      <div class="card border-0 bg-light rounded-4 p-4 shadow-sm">
        <div class="text-primary mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="#0d6efd" class="bi bi-t-shirt" viewBox="0 0 16 16">
  <path d="M8 0c-.787 0-1.55.192-2.184.517-.296.15-.58.324-.848.518L3.708 2.708 2.6 1.6C2.066 1.066 1.295 1.17.832 1.664c-.322.342-.425.82-.298 1.238L1.95 6.341a1 1 0 0 0 .98.717H3v7.25A1.75 1.75 0 0 0 4.75 16h6.5A1.75 1.75 0 0 0 13 14.308V7.058h1.07a1 1 0 0 0 .98-.717l1.416-3.439c.127-.418.024-.896-.298-1.238-.463-.495-1.234-.598-1.768-.064L12.292 2.708 11.032 1.035a4.243 4.243 0 0 0-.848-.518A4.004 4.004 0 0 0 8 0z"/>
</svg>
        </div>
        <h3 class="fw-bold text-dark">{{ total_productos }}+</h3>
        <p class="text-muted mb-0">Productos Disponibles</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 bg-light rounded-4 p-4 shadow-sm">
        <div class="text-success mb-3">
          <i class="bi bi-tags display-6"></i>
        </div>
        <h3 class="fw-bold text-dark">{{ total_categorias }}+</h3>
        <p class="text-muted mb-0">Categor√≠as</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 bg-light rounded-4 p-4 shadow-sm">
        <div class="text-warning mb-3">
          <i class="bi bi-star display-6"></i>
        </div>
        <h3 class="fw-bold text-dark">{{ productos_destacados|length }}+</h3>
        <p class="text-muted mb-0">Productos Destacados</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 bg-light rounded-4 p-4 shadow-sm">
        <div class="text-info mb-3">
          <i class="bi bi-people display-6"></i>
        </div>
        <h3 class="fw-bold text-dark">{{ total_clientes }}+</h3>
        <p class="text-muted mb-0">Clientes Satisfechos</p>
      </div>
    </div>
  </div>
</section>

<!-- CATEGOR√çAS -->
<section class="container my-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold display-5 mb-3">Nuestras Categor√≠as</h2>
    <p class="text-muted lead">Explora nuestra amplia variedad de estilos</p>
  </div>
  <div class="row g-4">
    {% for categoria in categorias %}
    <div class="col-md-4">
      <div class="card category-card border-0 shadow-lg h-100 overflow-hidden rounded-4">
        <div class="category-image-container">
          {% if categoria.imagen %}
          <img src="{{ url_for('usuario_cp.serve_uploaded_file', filename=categoria.imagen) }}" 
               class="card-img-top" 
               alt="{{ categoria.nombre }}"
               style="height: 250px; object-fit: cover;">
          {% else %}
          <div class="bg-gradient-secondary d-flex align-items-center justify-content-center" 
               style="height: 250px;">
            <i class="bi bi-tag text-white display-1"></i>
          </div>
          {% endif %}
          <div class="category-overlay"></div>
        </div>
        <div class="card-body text-center p-4">
          <h5 class="card-title fw-bold text-dark">{{ categoria.nombre }}</h5>
          <p class="card-text text-muted">{{ categoria.descripcion or 'Descubre los mejores productos' }}</p>
          <span class="badge bg-primary rounded-pill">{{ categoria.productos|length }} productos</span>
        </div>
      </div>
    </div>
    {% else %}
    <div class="col-12 text-center">
      <div class="card border-0 bg-light rounded-4 p-5">
        <i class="bi bi-inbox display-1 text-muted mb-3"></i>
        <h4 class="text-muted">No hay categor√≠as disponibles</h4>
        <p class="text-muted">Pr√≥ximamente agregaremos nuevas categor√≠as</p>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- PRODUCTOS DESTACADOS -->
<section id="productos-destacados" class="container my-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold display-5 mb-3">‚ú® Productos Destacados</h2>
    <p class="text-muted lead">Lo m√°s vendido y mejor valorado por nuestros clientes</p>
  </div>
  <div class="row g-4">
    {% for producto in productos_destacados %}
    <div class="col-xl-3 col-lg-4 col-md-6">
      <div class="card product-card border-0 shadow-sm h-100 rounded-4 overflow-hidden">
        <div class="position-relative">
          {% if producto.imagen %}
          <img src="{{ url_for('usuario_cp.serve_uploaded_file', filename=producto.imagen) }}" 
               class="card-img-top" 
               alt="{{ producto.nombre }}"
               style="height: 220px; object-fit: cover;">
          {% else %}
          <div class="bg-light d-flex align-items-center justify-content-center" 
               style="height: 220px;">
            <i class="bi bi-image text-muted display-4"></i>
          </div>
          {% endif %}
          {% if producto.destacado %}
          <span class="position-absolute top-0 start-0 m-3 badge bg-warning rounded-pill">
            <i class="bi bi-star-fill me-1"></i>Destacado
          </span>
          {% endif %}
          <span class="position-absolute top-0 end-0 m-3 badge bg-success rounded-pill">
            ${{ "%.2f"|format(producto.precio) }}
          </span>
        </div>
        <div class="card-body d-flex flex-column p-4">
          <h6 class="fw-bold text-dark mb-2">{{ producto.nombre }}</h6>
          <p class="text-muted small mb-2">{{ producto.categoria.nombre if producto.categoria else 'General' }}</p>
          <p class="text-muted small flex-grow-1">{{ producto.descripcion[:80] }}{% if producto.descripcion|length > 80 %}...{% endif %}</p>
          
          <div class="d-flex justify-content-between align-items-center mt-auto">
            <span class="badge bg-light text-dark border">
              <i class="bi bi-box-seam me-1"></i>{{ producto.stock }} disp.
            </span>
            <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-sm rounded-pill px-3">
              <i class="bi bi-cart-plus me-1"></i>Comprar
            </a>
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <div class="col-12 text-center">
      <div class="card border-0 bg-light rounded-4 p-5">
        <i class="bi bi-stars display-1 text-muted mb-3"></i>
        <h4 class="text-muted">No hay productos destacados</h4>
        <p class="text-muted">Los productos destacados aparecer√°n aqu√≠</p>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- √öLTIMOS PRODUCTOS -->
<section class="container my-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold display-5 mb-3">üÜï Nuevos Ingresos</h2>
    <p class="text-muted lead">Descubre nuestras √∫ltimas incorporaciones</p>
  </div>
  <div class="row g-4">
    {% for producto in productos %}
    <div class="col-xl-3 col-lg-4 col-md-6">
      <div class="card product-card border-0 shadow-sm h-100 rounded-4 overflow-hidden">
        <div class="position-relative">
          {% if producto.imagen %}
          <img src="{{ url_for('usuario_cp.serve_uploaded_file', filename=producto.imagen) }}" 
               class="card-img-top" 
               alt="{{ producto.nombre }}"
               style="height: 220px; object-fit: cover;">
          {% else %}
          <div class="bg-light d-flex align-items-center justify-content-center" 
               style="height: 220px;">
            <i class="bi bi-image text-muted display-4"></i>
          </div>
          {% endif %}
          <span class="position-absolute top-0 end-0 m-3 badge bg-dark rounded-pill">
            Nuevo
          </span>
        </div>
        <div class="card-body d-flex flex-column p-4">
          <h6 class="fw-bold text-dark mb-2">{{ producto.nombre }}</h6>
          <p class="text-muted small mb-2">{{ producto.categoria.nombre if producto.categoria else 'General' }}</p>
          <div class="d-flex justify-content-between align-items-center mt-auto">
            <span class="h6 text-primary mb-0">${{ "%.2f"|format(producto.precio) }}</span>
            <a href="{{ url_for('auth.login') }}" class="btn btn-outline-primary btn-sm rounded-pill px-3">
              <i class="bi bi-cart-plus me-1"></i>Comprar
            </a>
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <div class="col-12 text-center">
      <div class="card border-0 bg-light rounded-4 p-5">
        <i class="bi bi-clock display-1 text-muted mb-3"></i>
        <h4 class="text-muted">No hay productos recientes</h4>
        <p class="text-muted">Los nuevos productos aparecer√°n aqu√≠</p>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- CTA SECTION -->
<section class="container my-5">
  <div class="card border-0 bg-gradient-primary text-white rounded-4 shadow-lg overflow-hidden">
    <div class="row align-items-center">
      <div class="col-lg-8 p-5">
        <h3 class="fw-bold display-6 mb-3">¬øListo para renovar tu estilo?</h3>
        <p class="lead mb-4">√önete a nuestra comunidad y descubre las mejores ofertas en moda.</p>
        <div class="d-flex gap-3 flex-wrap">
          <a href="{{ url_for('auth.login') }}" class="btn btn-warning btn-lg px-4 py-2 rounded-pill">
            <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesi√≥n
          </a>
          <a href="{{ url_for('auth.register') }}" class="btn btn-outline-light btn-lg px-4 py-2 rounded-pill">
            <i class="bi bi-person-plus me-2"></i>Registrarse
          </a>
        </div>
      </div>
      <div class="col-lg-4 text-center p-4">
        <i class="bi bi-gem display-1 text-warning"></i>
      </div>
    </div>
  </div>
</section>

<style>
.hero-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.bg-gradient-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.bg-gradient-secondary {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.category-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.category-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 1rem 3rem rgba(0,0,0,.175) !important;
}

.product-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,.15) !important;
}

.category-image-container {
  position: relative;
  overflow: hidden;
}

.category-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.1) 100%);
}
</style>
{% endblock %}